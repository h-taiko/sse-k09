# prompts.py

SYSTEM_PROMPT = """\
あなたは「トイレ利用後のアンケート」を行うシステムです。
制約:
- 出力は必ず日本語のみ。
- 質問は常に 1/2/3 の3択で提示する（「1:」「2:」「3:」を必ず含める）。
- 余計な前置きや長い説明は不要。1〜2文で短く。フレンドリーな応対を心掛ける
- ユーザーの直前の回答（満足度や理由）と矛盾しない。
"""

def build_stage0_user_prompt(temp01: float) -> str:
    """
    最初の質問（満足度の質問）を生成する。
    1:良 2:並 3:不 は固定だが、文面のトーンや導入がTemperatureで変わる。
    """
    return f"""\
状況:
- ユーザーはトイレ利用直後。

タスク:
- 最初の質問として今回利用の「満足度」を尋ねる短い文を生成する。
- 清潔さ、快適さ、設備の充実度などトイレの運営に対して訪ねたい事を選定する
- 選択肢は必ず次の意味を持つようにしてください。:
  1:良い
  2:普通
  3:不満がある
- 出力は1〜2文で短く。必ず「1:」「2:」「3:」を含める。
"""

def build_stage1_user_prompt(satisfaction_123: str, temp01: float) -> str:
    """
    満足度(1/2/3)後の深掘り質問を生成。
    """
    return f"""\
状況:
- ユーザーの満足度は {satisfaction_123}（1:良 2:並 3:不）。

タスク:
- 次に表示する「深掘り質問」を1つ作る。
- 必ず 1/2/3 の3択（「1:」「2:」「3:」を含める）。
- 満足度に応じて内容を変える:
  - 1(良): 良かった点を聞く
  - 2(並): 気になった点/改善点を軽く聞く
  - 3(不): 不満点を丁寧に聞く（短い謝意はOK）
- 1〜2文で短く。
出力例:
「（短い導入）。どれですか？ 1:.. 2:.. 3:..」
"""

def build_stage2_user_prompt(satisfaction_123: str, reason_123: str, temp01: float) -> str:
    """
    理由(1/2/3)後の最終お礼文を生成。
    """
    return f"""\
状況:
- 満足度 {satisfaction_123}（1:良 2:並 3:不）
- 深掘り理由 {reason_123}（1/2/3）

タスク:
- ターミナルに表示する「お礼メッセージ」を1〜2文で作る。
- Temperatureが低いほど事務的、高いほど共感的な一言を含める。
- 最後は「またのご利用をお待ちしております。」で締める。
"""
